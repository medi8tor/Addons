local c,W=...local e,N=HeroCache,W.Utils local o=W.Unit local t,q,d=o.Player,o.Pet,o.Target local K,J=o.Focus,o.MouseOver local v,P,h=o.Arena,o.Boss,o.Nameplate local O,k=o.Party,o.Raid local V=W.Spell local l=W.Item local R=pairs local m=table.insert local H=table.sort local I=e.Enemies.ItemAction local w=e.Enemies.Melee local E=e.Enemies.Ranged local M=e.Enemies.SpellAction local a=e.Enemies.Spell local Q={"\065\114\101\110\097";"\066\111\115\115","\078\097\109\101\112\108\097\116\101"}local function j(c,W)local e={}for N,q in R(Q)do local d=o[q]for N,o in R(d)do local q=o:GUID()if not e[q]and(o:Exists()and(not o:IsBlacklisted()and(not o:IsUserBlacklisted()and(not o:IsDeadOrGhost()and(t:CanAttack(o)and W(o))))))then m(c,o)e[q]=true end end end end do local c={}function t.GetEnemiesInRange(e,W)local t=E if t[W]then return t[W]end local q={}t[W]=q if#t>=1 then local c={}for e,N in R(t)do if e>=W then m(c,e)end end if#c>=1 then if#c>=2 then H(c,N.SortASC)end for c,e in R(t[c[1]])do if e:IsInRange(W)then m(q,o)end end return q end end local d=c[W]if not d then d=function(c)return c:IsInRange(W)end c[W]=d end j(q,d)return q end end do local c={}function t.GetEnemiesInMeleeRange(e,W)local N=w if N[W]then return N[W]end local o={}N[W]=o local t=c[W]if not t then t=function(c)return c:IsInMeleeRange(W)end c[W]=t end j(o,t)return o end end do local c={}function t.GetEnemiesInSpellRange(e,W)local N=W.SpellID local o=a if o[N]then return o[N]end local t={}o[N]=t local q=c[N]if not q then q=function(c)return c:IsSpellInRange(W)end c[N]=q end j(t,q)return t end end do local c={}function t.GetEnemiesInItemActionRange(e,W)local N=W.ItemID local o=I if o[N]then return o[N]end local t={}o[N]=t local q=c[N]if not q then q=function(c)return c:IsItemInActionRange(W)end c[N]=q end j(t,q)return t end end do local c={}function t.GetEnemiesInSpellActionRange(e,W)local N=W.SpellID local o=M if o[N]then return o[N]end local t={}o[N]=t local q=c[N]if not q then q=function(c)return c:IsSpellInActionRange(W)end c[N]=q end j(t,q)return t end end