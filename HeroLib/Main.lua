local n,v=...local G=HeroCache local S=v.Unit local Z=S.Player local y=S.Target local p=v.Spell local t=v.Item local Q=math.max local I=math.min local s=true local B=false v.MainFrame=CreateFrame("\070\114\097\109\101","\072\101\114\111\076\105\098\095\077\097\105\110\070\114\097\109\101",UIParent)v.MainFrame:RegisterEvent("\065\068\068\079\078\095\076\079\065\068\069\068")v.MainFrame:SetScript("\079\110\069\118\101\110\116",function(n,G,S)if G=="\065\068\068\079\078\095\076\079\065\068\069\068"then if S=="\072\101\114\111\076\105\098"then if type(HeroLibDB)~="\116\097\098\108\101"then HeroLibDB={}end if type(HeroLibDB.GUISettings)~="\116\097\098\108\101"then HeroLibDB.GUISettings={}end v.GUI.LoadSettingsRecursively(v.GUISettings)v.GUI.CorePanelSettingsInit()C_Timer.After(2,function()v.MainFrame:UnregisterEvent("\065\068\068\079\078\095\076\079\065\068\069\068")end)end end end)v.Timer={Pulse=0,PulseOffset=0;TTD=0}function v.Pulse()if v.BuildInfo[4]and v.BuildInfo[4]<110000 then s=false end if not s then if not B then v.Print("\072\101\114\111\082\111\116\097\116\105\111\110 \097\110\100 \072\101\114\111\076\105\098 \099\117\114\114\101\110\116\108\121 \111\110\108\121 \115\117\112\112\111\114\116 \114\101\116\097\105\108 \087\111\087 \040\084\104\101 \087\097\114 \087\105\116\104\105\110\041\046 \067\108\097\115\115\105\099\044 \087\114\097\116\104 \111\102 \116\104\101 \076\105\099\104 \075\105\110\103\044 \097\110\100 \072\097\114\100\099\111\114\101 \067\108\097\115\115\105\099 \097\114\101 \110\111\116 \115\117\112\112\111\114\116\101\100\046")B=true end return end if GetTime(true)>v.Timer.Pulse and s then v.Timer.PulseOffset=.066+(v.GUISettings.General.ReduceCPULoad and v.GUISettings.General.ReduceCPULoadOffset/1000 or 0)v.Timer.Pulse=GetTime()+v.Timer.PulseOffset G.HasBeenReset=false G.Reset()if GetTime()>v.Timer.TTD then v.Timer.TTD=GetTime()+v.TTD.Settings.Refresh v.TTDRefresh()end end end v.MainFrame:SetScript("\079\110\085\112\100\097\116\101",v.Pulse)