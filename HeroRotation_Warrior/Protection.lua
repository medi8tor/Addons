local Z,n=...local X=HeroDBC.DBC local x=HeroLib local p=x.Unit local h=p.Player local y=p.Target local O=x.Spell local V=x.Item local b=HeroRotation()local i=b.Cast local Q=b.AoEON local H=b.CDsON local U=p.MouseOver local T=(b.Commons()).Everyone.num local S=(b.Commons()).Everyone.bool local J=math.floor local v=C_Timer.After local B local F=O.Warrior.Protection local m=V.Warrior.Protection local g={}local W local u local E local P=11111 local L=11111 local Y=(b.Commons()).Everyone local k=b.GUISettingsGet()local D={General=k.General;Commons=k.APL.Warrior.Commons,Protection=k.APL.Warrior.Protection,Prot_Defensives=k.APL.Warrior.Protection.Defensives,Protection_TTD=k.APL.Warrior.Protection_TTD;Protection_CDUSE=k.APL.Warrior.Protection_CDUSE,Interrupt=k.APL.Warrior.Protection_Interrupt.Interrupt}x:RegisterForEvent(function()P=11111 L=11111 end,"\080\076\065\089\069\082\095\082\069\071\069\078\095\069\078\065\066\076\069\068")local t=h:GetEquipment()local q=t[13]and V(t[13])or V(0)local z=t[14]and V(t[14])or V(0)x:RegisterForEvent(function()t=h:GetEquipment()q=t[13]and V(t[13])or V(0)z=t[14]and V(t[14])or V(0)end,"\080\076\065\089\069\082\095\069\081\085\073\080\077\069\078\084\095\067\072\065\078\071\069\068")local G local function w(Z)return Z~="\078\111\116 \085\115\101\100"and((Z=="\119\105\116\104 \067\111\111\108\100\111\119\110\115"or Z=="\115\109\097\108\108 \067\068\115"and D.Protection_CDUSE.smallcdswithCooldowns or Z=="\119\105\116\104 \067\111\111\108\100\111\119\110\115 \111\114 \065\111\069"or Z=="\111\110 \069\110\101\109\121\099\111\117\110\116 \111\114 \067\111\111\108\100\111\119\110\115"or Z=="\111\110 \066\111\115\115 \111\114 \119\105\116\104 \067\111\111\108\100\111\119\110\115")and H()or Z=="\097\108\119\097\121\115"or(Z=="\111\110 \066\111\115\115 \111\110\108\121"or Z=="\111\110 \066\111\115\115 \111\114 \111\110 \069\110\101\109\121\099\111\117\110\116"or Z=="\111\110 \066\111\115\115 \111\114 \119\105\116\104 \067\111\111\108\100\111\119\110\115")and(G or y:IsDummy())or Z=="\119\105\116\104 \066\108\111\111\100\108\117\115\116 \111\110\108\121"and h:BloodlustUp()or Z=="\115\109\097\108\108 \067\068\115"and Smallcds or(Z=="\111\110 \065\079\069"or Z=="\119\105\116\104 \067\111\111\108\100\111\119\110\115 \111\114 \065\111\069")and(Q()and E>=2)or(Z=="\111\110 \069\110\101\109\121\099\111\117\110\116 \111\114 \067\111\111\108\100\111\119\110\115"or Z=="\111\110 \069\110\101\109\121\099\111\117\110\116"or Z=="\111\110 \066\111\115\115 \111\114 \111\110 \069\110\101\109\121\099\111\117\110\116")and(E>=D.Protection_CDUSE.Enemycount and Q()))end local function C(Z)return G and D.Protection_TTD.IgnoreWhenBoss or Y.Buggedmobs[y:NPCID()]or Y.ISSolo()and D.Protection_TTD.IgnoreWhenSolo or Z==0 or L>=Z and L<7777 end local s={{F.IntimidatingShout;"\067\097\115\116 \073\110\116\105\109\105\100\097\116\105\110\103 \083\104\111\117\116 \040\073\110\116\101\114\114\117\112\116\041";function()return true end}}local function f()return m.ManicGrieftorch:IsEquipped()and(m.ManicGrieftorch:CooldownUp()or m.ManicGrieftorch:CooldownRemains()<=h:GCDRemains())end local function r()return h:IsTankingAoE(16)or h:IsTanking(y)or y:IsDummy()end local function N()if h:BuffUp(F.IgnorePain)then local Z=C_UnitAuras.GetPlayerAuraBySpellID(F.IgnorePain:ID())local n=Z.points[1]return D.Protection.AllowIPOvercap or n<h:MaxHealth()*.1 else return true end end local function j()if h:BuffUp(F.IgnorePain)then local Z=C_UnitAuras.GetPlayerAuraBySpellID(F.IgnorePain:ID())return Z.points[1]else return 0 end end local function a()return r()and(F.ShieldBlock:IsReady()and h:BuffRemains(F.ShieldBlockBuff)<=10)end local function d(Z)return Z:IsSpellInRange(F.HeroicThrow)end local function I(Z)return Z:NPCID()==204560 end local function K(Z)return Z:CastSpellID()==408805 end local function o(Z)local n=D.Protection.RageCapValue if n<35 or h:Rage()<35 then return false end local X=false local x=h:Rage()>=35 and not a()if x and(h:Rage()+Z>=n or F.DemoralizingShout:IsReady())then X=true end if X then if r()and(h:AffectingCombat()and((N()or h:BuffRemains(F.IgnorePain)<=1)and W))then if i(F.IgnorePain,true)then return"\105\103\110\111\114\101\095\112\097\105\110 \114\097\103\101 \099\097\112\112\101\100"end else if i(F.Revenge)then return"\114\101\118\101\110\103\101 \114\097\103\101 \099\097\112\112\101\100"end end end end local function c()local Z=h:IncomingSpell(Y.TankBustersList2)if Z and b.DebugON()then print("\084\097\110\107 \066\117\115\116\101\114\058 "..Z)end if F.VictoryRush:IsCastable()and(W and(h:CanAttack(y)and(h:BuffUp(F.VictoriousBuff)and h:HealthPercentageWeighted()<=D.Protection.Defensives.VictoryRushHP)))then if i(F.VictoryRush)then return"\086\105\099\116\111\114\121\082\117\115\104"end end if F.ImpendingVictory:IsCastable()and(W and(h:CanAttack(y)and(h:AffectingCombat()and h:HealthPercentageWeighted()<=D.Protection.Defensives.ImpendingVictoryHP)))then if i(F.ImpendingVictory)then return"\073\109\112\101\110\100\105\110\103\086\105\099\116\111\114\121"end end if F.BitterImmunity:IsCastable()and(h:AffectingCombat()and h:HealthPercentageWeighted()<=D.Protection.Defensives.BitterImmunityHP)then if i(F.BitterImmunity)then return"\066\105\116\116\101\114\073\109\109\117\110\105\116\121"end end if F.ShieldWall:IsCastable()and(h:AffectingCombat()and(r()and((h:HealthPercentageWeighted()<=D.Protection.Defensives.ShieldWallHP or IsShieldWall and x.CombatTime()<5)and h:BuffDown(F.LastStandBuff))))then if i(F.ShieldWall)then return"\083\104\105\101\108\100\087\097\108\108"end end if F.LastStand:IsCastable()and(h:AffectingCombat()and(r()and((h:HealthPercentageWeighted()<=D.Protection.Defensives.LastStandHP or IsLastStand and x.CombatTime()<5)and h:BuffDown(F.ShieldWallBuff))))then if i(F.LastStand)then return"\108\097\115\116\095\115\116\097\110\100 \109\097\105\110 \050\052"end end if a()and(h:AffectingCombat()and(h:BuffRemains(F.ShieldBlockBuff)<=10 and(h:HealthPercentageWeighted()<=D.Protection.Defensives.ShieldBlockHP or Z)))then if i(F.ShieldBlock,true)then return"\083\104\105\101\108\100\066\108\111\099\107"end end if F.IgnorePain:IsReady()and(h:AffectingCombat()and((N()or h:BuffRemains(F.IgnorePain)<=1)and(h:HealthPercentageWeighted()<=D.Protection.Defensives.IgnorePainHP and(h:RageDeficit()<=15 and F.ShieldSlam:CooldownUp()or h:BuffRemains(F.IgnorePain)<=1 or h:RageDeficit()<=40 and(F.ShieldCharge:CooldownUp()and F.ChampionsBulwark:IsAvailable())or h:RageDeficit()<=20 and F.ShieldCharge:CooldownUp()or h:RageDeficit()<=30 and(F.DemoralizingShout:CooldownUp()and F.BoomingVoice:IsAvailable())or h:RageDeficit()<=20 and F.Avatar:CooldownUp()or h:RageDeficit()<=45 and(F.DemoralizingShout:CooldownUp()and(F.BoomingVoice:IsAvailable()and(h:BuffUp(F.LastStandBuff)and F.UnnervingFocus:IsAvailable())))or h:RageDeficit()<=30 and(F.Avatar:CooldownUp()and(h:BuffUp(F.LastStandBuff)and F.UnnervingFocus:IsAvailable()))or h:RageDeficit()<=20 or h:RageDeficit()<=40 and(F.ShieldSlam:CooldownUp()and(h:BuffUp(F.ViolentOutburstBuff)and(F.HeavyRepercussions:IsAvailable()and F.ImpenetrableWall:IsAvailable())))or h:RageDeficit()<=55 and(F.ShieldSlam:CooldownUp()and(h:BuffUp(F.ViolentOutburstBuff)and(h:BuffUp(F.LastStandBuff)and(F.UnnervingFocus:IsAvailable()and(F.HeavyRepercussions:IsAvailable()and F.ImpenetrableWall:IsAvailable())))))or h:RageDeficit()<=17 and(F.ShieldSlam:CooldownUp()and F.HeavyRepercussions:IsAvailable())or h:RageDeficit()<=18 and(F.ShieldSlam:CooldownUp()and F.ImpenetrableWall:IsAvailable())or(h:Rage()>=70 or h:BuffStack(F.SeeingRedBuff)==7 and h:Rage()>=35)and(F.ShieldSlam:CooldownRemains()<=1 and(h:BuffRemains(F.ShieldBlockBuff)>=4 and h:HasTier(31,2)))))))then if i(F.IgnorePain,true)then return"\105\103\110\111\114\101\095\112\097\105\110 \109\097\105\110 \050\050"end end if AutoStance then if F.DefensiveStance:IsCastable()and(h:BuffUp(F.BattleStance)and h:HealthPercentage()<=D.Prot_Defensives.DefStanceHP)then if i(F.DefensiveStance,true)then return"\066\101\097\114\070\111\114\109"end end if F.BattleStance:IsCastable()and(h:BuffUp(F.DefensiveStance)and(h:HealthPercentage()>D.Prot_Defensives.BattleStanceHP and D.Prot_Defensives.BattleStanceHP>0))then if i(F.BattleStance,true)then return"\077\111\111\110\107\105\110\070\111\114\109"end end end end local function l()if y:IsInMeleeRange(12)then if F.ThunderClap:IsCastable()then if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \112\114\101\099\111\109\098\097\116"end end else end end local function M()if y:DebuffRemains(F.RendDebuff)<=1 then if F.ThunderBlastAbility:IsReady()and y:IsInMeleeRange(8)then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \097\111\101 \050"end end if F.ThunderClap:IsCastable()and(y:IsInMeleeRange(8)and y:DebuffRemains(F.RendDebuff)<=1)then o(5)if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \097\111\101 \052"end end end if h:BuffUp(F.ViolentOutburstBuff)and(h:BuffUp(F.AvatarBuff)and F.UnstoppableForce:IsAvailable())then if F.ThunderBlastAbility:IsReady()and(E>2 and y:IsInMeleeRange(8))then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \097\111\101 \054"end end if F.ThunderClap:IsCastable()and(E>6 and y:IsInMeleeRange(8))then o(5)if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \097\111\101 \056"end end end if F.Revenge:IsReady()and(W and(h:Rage()>=70 and(F.SeismicReverberation:IsAvailable()and E>=3)))then if i(F.Revenge)then return"\114\101\118\101\110\103\101 \097\111\101 \049\048"end end if F.ShieldSlam:IsCastable()and(W and(h:Rage()<=60 or h:BuffUp(F.ViolentOutburstBuff)and(E<=4 and F.CrashingThunder:IsAvailable())))then o(20)if i(F.ShieldSlam)then return"\115\104\105\101\108\100\095\115\108\097\109 \097\111\101 \049\050"end end if F.ThunderBlastAbility:IsReady()and y:IsInMeleeRange(8)then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \097\111\101 \049\052"end end if F.ThunderClap:IsCastable()and y:IsInMeleeRange(8)then o(5)if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \097\111\101 \049\054"end end if F.Revenge:IsReady()and(W and(h:Rage()>=30 or h:Rage()>=40 and F.BarbaricTraining:IsAvailable()))then if i(F.Revenge)then return"\114\101\118\101\110\103\101 \097\111\101 \049\052"end end end local function R()if F.ThunderBlastAbility:IsReady()and(y:IsInMeleeRange(8)and(h:BuffStack(F.ThunderBlastBuff)==2 and(h:BuffStack(F.BurstofPowerBuff)<=1 and(h:BuffUp(F.AvatarBuff)and F.UnstoppableForce:IsAvailable()))))then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \103\101\110\101\114\105\099 \050"end end if F.ShieldSlam:IsCastable()and(W and(h:BuffStack(F.BurstofPowerBuff)==2 and h:BuffStack(F.ThunderBlastBuff)<=1 or h:BuffUp(F.ViolentOutburstBuff)or h:Rage()<=70 and F.Demolish:IsAvailable()))then o(20)if i(F.ShieldSlam)then return"\115\104\105\101\108\100\095\115\108\097\109 \103\101\110\101\114\105\099 \052"end end if F.Execute:IsReady()and(W and(h:Rage()>=70 or h:Rage()>=40 and(F.ShieldSlam:CooldownDown()and F.Demolish:IsAvailable())or h:Rage()>=50 and F.ShieldSlam:CooldownDown()or h:BuffUp(F.SuddenDeathBuff)and F.SuddenDeath:IsAvailable()))then if i(F.Executecast)then return"\101\120\101\099\117\116\101 \103\101\110\101\114\105\099 \054"end end if F.ShieldSlam:IsCastable()and W then o(20)if i(F.ShieldSlam)then return"\115\104\105\101\108\100\095\115\108\097\109 \103\101\110\101\114\105\099 \056"end end if F.ThunderBlastAbility:IsReady()and y:IsInMeleeRange(8)then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \103\101\110\101\114\105\099 \049\048"end end if F.ThunderClap:IsCastable()and(y:IsInMeleeRange(8)and(y:DebuffRemains(F.RendDebuff)<=2 and h:BuffDown(F.ViolentOutburstBuff)))then o(5)if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \103\101\110\101\114\105\099 \049\050"end end if F.ThunderClap:IsCastable()and(y:IsInMeleeRange(8)and(E>1 or F.ShieldSlam:CooldownDown()and h:BuffDown(F.ViolentOutburstBuff)))then o(5)if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \103\101\110\101\114\105\099 \049\052"end end if F.Revenge:IsReady()and(W and(h:Rage()>=80 and y:HealthPercentage()>20 or h:BuffUp(F.RevengeBuff)and(y:HealthPercentage()<=20 and(h:Rage()<=18 and F.ShieldSlam:CooldownDown()))or h:BuffUp(F.RevengeBuff)and y:HealthPercentage()>20 or(h:Rage()>=80 and y:HealthPercentage()>35 or h:BuffUp(F.RevengeBuff)and(y:HealthPercentage()<=35 and(h:Rage()<=18 and F.ShieldSlam:CooldownDown()))or h:BuffUp(F.RevengeBuff)and y:HealthPercentage()>35)and F.Massacre:IsAvailable()))then if i(F.Revenge)then return"\114\101\118\101\110\103\101 \103\101\110\101\114\105\099 \049\054"end end if F.Execute:IsReady()and W then if i(F.Executecast)then return"\101\120\101\099\117\116\101 \103\101\110\101\114\105\099 \049\056"end end if F.Revenge:IsReady()and W then if i(F.Revenge)then return"\114\101\118\101\110\103\101 \103\101\110\101\114\105\099 \050\048"end end if E>=1 or F.ShieldSlam:CooldownDown()and h:BuffUp(F.ViolentOutburstBuff)then if F.ThunderBlastAbility:IsReady()and y:IsInMeleeRange(8)then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \103\101\110\101\114\105\099 \050\050"end end if F.ThunderClap:IsCastable()and y:IsInMeleeRange(8)then o(5)if i(F.ThunderClap)then return"\116\104\117\110\100\101\114\095\099\108\097\112 \103\101\110\101\114\105\099 \050\052"end end end if F.Devastate:IsCastable()and W then if i(F.Devastate)then return"\100\101\118\097\115\116\097\116\101 \103\101\110\101\114\105\099 \050\054"end end end local function e()Enemies30Yard=h:GetEnemiesInRange(30)u=h:GetEnemiesInMeleeRange(8)if Q()then E=#u else E=1 end Smallcds=b.ToggleIconFrame:GetToggle(1)AutoStance=b.ToggleIconFrame:GetToggle(2)InterruptToggle=b.ToggleIconFrame:GetToggle(3)IsAvatar=C(D.Protection_TTD.AvatarTTD)and w(D.Protection_CDUSE.Avatar)IsRacials=C(D.Protection_TTD.RacialsTTD)and w(D.Protection_CDUSE.Racials)IsPotions=C(D.Protection_TTD.PotionsTTD)and((D.Protection_CDUSE.Potionswhensolo or not D.Protection_CDUSE.Potionswhensolo and not Y.ISSolo())and w(D.Protection_CDUSE.Potions))IsTrinket1=C(D.Protection_TTD.TrinketsTTD)and w(D.Protection_CDUSE.Trinket1)IsTrinket2=C(D.Protection_TTD.TrinketsTTD)and w(D.Protection_CDUSE.Trinket2)IsRavager=C(D.Protection_TTD.RavagerTTD)and w(D.Protection_CDUSE.Ravager)IsThunderousRoar=C(D.Protection_TTD.ThunderousRoarTTD)and w(D.Protection_CDUSE.ThunderousRoar)IsChampionsSpear=C(D.Protection_TTD.ChampionsSpearTTD)and w(D.Protection_CDUSE.ChampionsSpear)IsDemolish=C(D.Protection_TTD.DemolishTTD)and w(D.Protection_CDUSE.Demolish)IsDemoralizingShout=C(D.Protection_TTD.DemoralizingShoutTTD)and w(D.Protection_CDUSE.DemoralizingShout)IsLastStand=w(D.Protection_CDUSE.LastStand)IsShieldWall=w(D.Protection_CDUSE.ShieldWall)local Z=0 if F.RumblingEarth:IsAvailable()then Z=16 else Z=10 end if Y.TargetIsValid()or h:AffectingCombat()then P=x.BossFightRemains()G=true L=P if L==11111 then G=false L=x.FightRemains(u,false)end end if Y.TargetIsValid()or h:AffectingCombat()then W=y:IsInMeleeRange(5)end if F.BattleShout:IsCastable()and(not h:DebuffUp(F.Corruption)and((Y.GroupBuffMissing(F.BattleShoutBuff,true)and(D.Commons.BattleShout=="\099\104\101\099\107 \119\104\111\108\101 \103\114\111\117\112"and(h:IsInRaidArea()or h:IsInDungeonArea()))or h:BuffDown(F.BattleShoutBuff,true)and(D.Commons.BattleShout=="\111\110\108\121 \099\104\101\099\107 \117\115"or D.Commons.BattleShout=="\099\104\101\099\107 \119\104\111\108\101 \103\114\111\117\112"))and not h:IsMounted()))then if b.Cast(F.BattleShout)then return"\066\097\116\116\108\101\083\104\111\117\116"end end if D.Commons.CCIncorperal then B=Y.IncorpCycle(F.IntimidatingShout,8,false,false)B=Y.IncorpCycle(F.StormBolt,20,false,false)if B then return B end end local n=h:IncomingSpell(Warrior.SpellReflectList)local X=h:IncomingSpellreflection(Warrior.SpellReflectList)if X and b.DebugON()then print("\083\112\101\108\108 \082\101\102\108\101\099\116 \067\097\115\116\058 "..X)end local O=h:BuffUp(F.SpellReflection)or(n or h:IncomingSpell(Y.TankBustersMagicList))and(F.SpellReflection:IsReady()and D.Commons.AutoSpellreflection)if F.SpellReflection:IsReady()and((X or h:IncomingSpell(Y.TankBustersMagicList))and D.Commons.AutoSpellreflection)then if i(F.SpellReflection,true)then return"\083\112\101\108\108 \082\101\102\108\101\099\116\105\111\110"end end if F.BattleStance:IsCastable()and(AutoStance and(h:BuffDown(F.BattleStance,true)and(h:HealthPercentage()>D.Prot_Defensives.BattleStanceHP and D.Protection.Stance=="\066\097\116\116\108\101 \083\116\097\110\099\101")))then if i(F.BattleStance,true)then return"\098\097\116\116\108\101\095\115\116\097\110\099\101 \112\114\101\099\111\109\098\097\116 \054"end end if F.DefensiveStance:IsCastable()and(AutoStance and(h:BuffDown(F.DefensiveStance,true)and D.Protection.Stance=="\068\101\102\101\110\115\105\118\101 \083\116\097\110\099\101"))then if i(F.DefensiveStance,true)then return"\068\101\102\101\110\115\105\118\101\083\116\097\110\099\101 \112\114\101\099\111\109\098\097\116 \054"end end B=c()if B then return B end if Y.TargetIsValid()then if not D.Protection.AttackonlyinCombat or D.Protection.AttackonlyinCombat and y:AffectingCombat()then if not I(p.Target)then if not h:AffectingCombat()then B=l()if B then return B end end if InterruptToggle and not O then B=Y.InterruptCycle(F.Pummel,5,true,nil,false)if B then return B end B=D.Interrupt.UseStormbolt and Y.InterruptCycle(F.StormBolt,20,false,nil,true)if B then return B end B=D.Interrupt.UseShockwave and Y.InterruptCycle(F.Shockwave,Z,false,nil,true,true)if B then return B end end if D.Commons.Enabled.Trinkets or D.Commons.Enabled.Items then local Z,n,X=h:GetUseableItems(g)if Z then local X=D.Commons.DisplayStyle.Trinkets if(n==13 and IsTrinket1 or n==14 and IsTrinket2)and(W and D.Commons.Enabled.Trinkets)then if n==16 then b.CastMacro(1)return"\119\101\097\112\111\110 \099\097\115\116"end if i(Z,true,X)then return"\071\101\110\101\114\105\099 \117\115\101\095\105\116\101\109\115 \102\111\114 "..Z:Name()end end end end if F.WreckingThrow:IsCastable()and(W and(y:BuffUp(F.CorruptBuff)or y:BuffUp(F.SupernovaBuff)))then if i(F.WreckingThrow)then return"\087\114\101\099\107\105\110\103 \084\104\114\111\119 \083\104\105\101\108\100"end end if F.HeroicThrow:IsCastable()and h:AffectingCombat()then if Y.CastCycle(F.HeroicThrow,Enemies30Yard,d,31,nil,nil,false)then return"\072\101\114\111\105\099 \084\104\114\111\119 \099\121\099\108\101"end end if F.Avatar:IsCastable()and(IsAvatar and(W and(h:BuffDown(F.ThunderBlastBuff)or h:BuffStack(F.ThunderBlastBuff)<=2)))then if i(F.Avatar,true)then return"\097\118\097\116\097\114 \109\097\105\110 \050"end end if F.BloodFury:IsCastable()and(IsRacials and W)then if i(F.BloodFury,true)then return"\098\108\111\111\100\095\102\117\114\121 \109\097\105\110 \054"end end if F.Berserking:IsCastable()and(IsRacials and W)then if i(F.Berserking,true)then return"\098\101\114\115\101\114\107\105\110\103 \109\097\105\110 \056"end end if F.ArcaneTorrent:IsCastable()and(IsRacials and W)then if i(F.ArcaneTorrent,true)then return"\097\114\099\097\110\101\095\116\111\114\114\101\110\116 \109\097\105\110 \049\048"end end if F.LightsJudgment:IsCastable()and(IsRacials and W)then if i(F.LightsJudgment,true)then return"\108\105\103\104\116\115\095\106\117\100\103\109\101\110\116 \109\097\105\110 \049\050"end end if F.Fireblood:IsCastable()and(IsRacials and W)then if i(F.Fireblood,true)then return"\102\105\114\101\098\108\111\111\100 \109\097\105\110 \049\052"end end if F.AncestralCall:IsCastable()and(IsRacials and W)then if i(F.AncestralCall,true)then return"\097\110\099\101\115\116\114\097\108\095\099\097\108\108 \109\097\105\110 \049\054"end end if F.BagofTricks:IsCastable()and(IsRacials and W)then if i(F.BagofTricks,true)then return"\097\110\099\101\115\116\114\097\108\095\099\097\108\108 \109\097\105\110 \049\056"end end if D.Commons.Enabled.Potions and(IsPotions and((h:BuffUp(F.AvatarBuff)or h:BuffDown(F.AvatarBuff)and y:HealthPercentage()<=20 or not IsAvatar)and W))then local Z=Y.PotionSelected()if Z and Z:IsReady()then b.CastMacro(3,true,nil,Z)return"\067\097\115\116 \080\111\116\105\111\110"end end if F.Ravager:IsCastable()and(IsRavager and W)then o(10)if b.CastTarget(F.Ravager,(b.TName()).PLAYER)then return"\114\097\118\097\103\101\114 \109\097\105\110 \050\054"end end if F.DemoralizingShout:IsCastable()and(IsDemoralizingShout and(W and F.BoomingVoice:IsAvailable()))then o(30)if i(F.DemoralizingShout,false)then return"\100\101\109\111\114\097\108\105\122\105\110\103\095\115\104\111\117\116 \109\097\105\110 \050\056"end end if F.ChampionsSpear:IsCastable()and(IsChampionsSpear and W)then o(20)if b.CastTarget(F.ChampionsSpear,(b.TName()).PLAYER)then return"\067\104\097\109\112\105\111\110\115\083\112\101\097\114 \109\097\105\110 \051\048"end end if F.ThunderBlastAbility:IsReady()and(y:IsInMeleeRange(8)and(E>=2 and h:BuffStack(F.ThunderBlastBuff)==2))then o(5)if i(F.ThunderBlastAbility)then return"\116\104\117\110\100\101\114\095\098\108\097\115\116 \109\097\105\110 "end end if F.Demolish:IsCastable()and(IsDemolish and(not h:IsMoving()and(W and h:BuffStack(F.ColossalMightBuff)>=3)))then if i(F.Demolish)then return"\100\101\109\111\108\105\115\104 \109\097\105\110 "end end if F.ThunderousRoar:IsCastable()and(IsThunderousRoar and y:IsInMeleeRange(8))then if i(F.ThunderousRoar)then return"\116\104\117\110\100\101\114\111\117\115\095\114\111\097\114 \109\097\105\110 \051\050"end end if F.ShieldCharge:IsCastable()and(D.Protection.UseShieldCharge and y:IsInMeleeRange(5))then o(40)if i(F.ShieldCharge)then return"\115\104\105\101\108\100\095\099\104\097\114\103\101 \109\097\105\110 \051\056"end end if E>3 then B=M()if B then return B end if b.CastAnnotated(F.Pool,false,"\087\065\073\084")then return"\080\111\111\108 \102\111\114 \065\111\101\040\041"end end B=R()if B then return B end if b.CastAnnotated(F.Pool,false,"\087\065\073\084")then return"\087\097\105\116\047\080\111\111\108 \082\101\115\111\117\114\099\101\115"end end end end end local function A()b.ResetToggle()D.Protection.Display()b:UpdateMacro("\109\097\099\114\111\049","\047\117\115\101 \049\054")b.ToggleIconFrame:AddButtonCustom("\083",1,"\115\109\097\108\108\067\068\115","\115\109\097\108\108\099\100\115")b.ToggleIconFrame:AddButtonCustom("\065",2,"\065\117\116\111 \083\116\097\110\099\101","\097\117\116\111\115\116\097\110\099\101")b.ToggleIconFrame:AddButtonCustom("\073",3,"\073\110\116\101\114\114\117\112\116","\105\110\116\101\114\114\117\112\116")b.Print("\080\114\111\116\101\099\116\105\111\110 \087\097\114\114\105\111\114 \114\111\116\097\116\105\111\110 \104\097\115 \098\101\101\110 \117\112\100\097\116\101\100 \102\111\114 \112\097\116\099\104 \049\049\046\048\046\050\046 \076\097\115\116 \085\112\100\097\116\101 \048\055\046\049\048\046\050\048\050\052")end b.SetAPL(73,e,A)