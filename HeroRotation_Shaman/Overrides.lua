local K=HeroLib local V=HeroCache local s=K.Unit local w=s.Player local p=s.Pet local N=s.Target local d=K.Spell local R=K.Item local y=HeroRotation()local C=(y.Commons()).Everyone local T=d.Shaman.Elemental local o=d.Shaman.Enhancement local I=(y.Commons()).Shaman K.AddCoreOverride("\080\108\097\121\101\114\046\077\097\101\108\115\116\114\111\109\080",function()local K=w:Maelstrom()if not w:IsCasting()then return K else if w:IsCasting(T.ElementalBlast)then return K-90 elseif w:IsCasting(T.Icefury)then return K+10 elseif w:IsCasting(T.LightningBolt)then return K+6 elseif w:IsCasting(T.LavaBurst)then return K+8 elseif w:IsCasting(T.ChainLightning)then return K+2*I.ClusterTargets else return K end end end,262)K.AddCoreOverride("\083\112\101\108\108\046\073\115\086\105\097\098\108\101",function(K)local V=K:IsReady()and C.ShouldStopCast(K)local s=T if K==s.Stormkeeper or K==s.ElementalBlast or K==s.Icefury then local p=w:BuffUp(s.SpiritwalkersGraceBuff)or not w:IsMoving()return V and(p and not w:IsCasting(K))elseif K==s.LavaBeam then local K=w:BuffUp(s.SpiritwalkersGraceBuff)or not w:IsMoving()return V and K elseif K==s.LightningBolt then local K=w:BuffUp(s.SpiritwalkersGraceBuff)or w:BuffUp(s.StormkeeperBuff)or not w:IsMoving()return V and K elseif K==s.ChainLightning then local K=w:BuffUp(s.SpiritwalkersGraceBuff)or w:BuffUp(s.StormkeeperBuff)or w:BuffUp(s.ArcDischargeBuff)or not w:IsMoving()return V and K elseif K==s.LavaBurst then local K=w:BuffUp(s.SpiritwalkersGraceBuff)or w:BuffUp(s.LavaSurgeBuff)or not w:IsMoving()local p=w:BuffUp(s.LavaSurgeBuff)local N=s.LavaBurst:Charges()>=1 and not w:IsCasting(s.LavaBurst)local d=s.LavaBurst:Charges()==2 and w:IsCasting(s.LavaBurst)return V and(K and(p or N or d))else return V end end,262)K.AddCoreOverride("\080\108\097\121\101\114\046\077\111\116\069\085\112",function()if not T.MasteroftheElements:IsAvailable()then return false end local K=w:BuffUp(T.MasteroftheElementsBuff)if not w:IsCasting()then return K else if w:IsCasting(T.LavaBurst)then return true elseif w:IsCasting(T.ElementalBlast)or w:IsCasting(T.Icefury)or w:IsCasting(T.LightningBolt)or w:IsCasting(T.ChainLightning)then return false else return K end end end,262)K.AddCoreOverride("\080\108\097\121\101\114\046\080\111\116\077\085\112",function()if not T.PoweroftheMaelstrom:IsAvailable()then return false end local K=w:BuffStack(T.PoweroftheMaelstromBuff)if not w:IsCasting()then return K>0 else if K==1 and(w:IsCasting(T.LightningBolt)or w:IsCasting(T.ChainLightning))then return false else return K>0 end end end,262)K.AddCoreOverride("\080\108\097\121\101\114\046\083\116\111\114\109\107\101\101\112\101\114\085\112",function()if not T.Stormkeeper:IsAvailable()then return false end local K=w:BuffUp(T.StormkeeperBuff)if not w:IsCasting()then return K else if w:IsCasting(T.Stormkeeper)then return true else return K end end end,262)K.AddCoreOverride("\080\108\097\121\101\114\046\073\099\101\102\117\114\121\085\112",function()if not T.Icefury:IsAvailable()then return false end local K=w:BuffUp(T.IcefuryBuff)if not w:IsCasting()then return K else if w:IsCasting(T.Icefury)then return true else return K end end end,262)local u u=K.AddCoreOverride("\083\112\101\108\108\046\073\115\082\101\097\100\121",function(K,V,s,w,p,d)local R=true if s then local K=p or N R=K:IsInRange(s,w)end local y=u(K,V,s,w,p,d)and C.ShouldStopCast(K)return y end,264)