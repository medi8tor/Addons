local K,V=...local s=HeroLib local w=HeroRotation()local p=HeroCache local N=s.Unit local d=N.Player local R=N.Target local y=s.Spell local C=s.Item local T=GetTime local o=C_Timer local I=select;(w.Commons()).Shaman={}local u=(w.Commons()).Shaman u.LastSKCast=0 u.LastSKBuff=0 u.LastRollingThunderTick=0 u.FeralSpiritCount=0 u.CracklingSurgeStacks=0 u.IcyEdgeStacks=0 u.MoltenWeaponStacks=0 u.TempestMaelstrom=0 s:RegisterForSelfCombatEvent(function(...)local K,V,s,w,p,N,R,y,C=I(4,...)if K==d:GUID()and C==191634 then u.LastSKCast=T()end end,"\083\080\069\076\076\095\067\065\083\084\095\083\085\067\067\069\083\083")s:RegisterForSelfCombatEvent(function(...)local K,V,s,w,p=I(8,...)if K==d:GUID()and p==191634 then u.LastSKBuff=T()o.After(.1,function()if u.LastSKBuff~=u.LastSKCast then u.LastRollingThunderTick=u.LastSKBuff end end)end end,"\083\080\069\076\076\095\065\085\082\065\095\065\080\080\076\073\069\068","\083\080\069\076\076\095\065\085\082\065\095\065\080\080\076\073\069\068\095\068\079\083\069")s:RegisterForSelfCombatEvent(function(...)local K=I(12,...)if K==262627 then u.FeralSpiritCount=u.FeralSpiritCount+1 o.After(15,function()u.FeralSpiritCount=u.FeralSpiritCount-1 end)end end,"\083\080\069\076\076\095\083\085\077\077\079\078")s:RegisterForCombatEvent(function(...)local K,V,s,w,p=I(8,...)if K==d:GUID()then if p==224125 then u.MoltenWeaponStacks=u.MoltenWeaponStacks+1 elseif p==224126 then u.IcyEdgeStacks=u.IcyEdgeStacks+1 elseif p==224127 then u.CracklingSurgeStacks=u.CracklingSurgeStacks+1 end end end,"\083\080\069\076\076\095\065\085\082\065\095\065\080\080\076\073\069\068")s:RegisterForCombatEvent(function(...)local K,V,s,w,p=I(8,...)if K==d:GUID()then if p==224125 then u.MoltenWeaponStacks=u.MoltenWeaponStacks-1 elseif p==224126 then u.IcyEdgeStacks=u.IcyEdgeStacks-1 elseif p==224127 then u.CracklingSurgeStacks=u.CracklingSurgeStacks-1 end end end,"\083\080\069\076\076\095\065\085\082\065\095\082\069\077\079\086\069\068")u.FireElemental={GreaterActive=false,LesserActive=false}u.StormElemental={GreaterActive=false,LesserActive=false}s:RegisterForSelfCombatEvent(function(...)local K,V,s,w,p=I(8,...)if p==188592 or p==118291 then u.FireElemental.GreaterActive=true o.After(30,function()u.FireElemental.GreaterActive=false end)elseif p==462992 or p==462991 then u.FireElemental.LesserActive=true o.After(15,function()u.FireElemental.LesserActive=false end)elseif p==157299 or p==157319 then u.StormElemental.GreaterActive=true o.After(30,function()u.StormElemental.GreaterActive=false end)elseif p==462993 or p==462990 then u.StormElemental.LesserActive=true o.After(15,function()u.StormElemental.LesserActive=false end)end end,"\083\080\069\076\076\095\083\085\077\077\079\078")s:RegisterForSelfCombatEvent(function(...)local K=I(12,...)if K==344179 then u.TempestMaelstrom=u.TempestMaelstrom+1 if u.TempestMaelstrom>=40 then u.TempestMaelstrom=u.TempestMaelstrom-40 end end end,"\083\080\069\076\076\095\065\085\082\065\095\065\080\080\076\073\069\068","\083\080\069\076\076\095\065\085\082\065\095\065\080\080\076\073\069\068\095\068\079\083\069")